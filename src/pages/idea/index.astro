---
import Layout from "@layouts/Layout.astro";
import Drawer from "@layouts/Drawer.astro";
import { getCollection } from "astro:content";
import { Lightbulb } from "lucide-astro";
import { Idea } from "@tool/idea";

const ideas = (await getCollection("ideas"))
  .sort((a, b) => (
    b.data.pubDate!.valueOf() - 
    a.data.pubDate!.valueOf()
  ))

---

<Layout>
  <Drawer>
    <div class="flex flex-col w-full h-full items-center">
      <div class="h-4"></div>
      <span class="text-6xl font-bold text-center">Ideas</span>
      <div class="h-4"></div>
      <div class="grid grid-cols-1 lg:grid-cols-2 sm:max-w-sm lg:max-w-4xl">
        { ideas.map(idea => (
          <a href={`/idea/${Idea.slug(idea)}`} class="flex flex-row items-center p-4 rounded-lg hover:bg-base-200">
            <Lightbulb class="hidden sm:inline w-10 h-10"/>
            <div class="hidden sm:flex divider divider-horizontal"></div>
            <div class="flex flex-col flex-1 items-start">
              <span class="text-lg lg:text-xl font-bold">{idea.data.title }</span>
              <div class="text-sm lg:text-lg flex flex-row gap-1 ">
                <span>{idea.data.author                 }</span>
                { idea.data.author && "|" }
                <span>{idea.data.pubDate?.toDateString()}</span>
              </div>
            </div>
          </a>
        ))}
      </div>

    </div>
  </Drawer>
</Layout>